import{a as A}from"./axios-G2rPRu76.js";import{v as G,x as K,u as X,g as l,s as q,_ as D,o as h,c as y,a as t,y as Y,z as N,A as U,F as $,m as R,B as Q,k as J,l as Z,h as ee,r as S,b as P,w as L,t as x,C as te,j as B,d as E,n as se,q as oe}from"./index-rRgU2xyF.js";import{u as ne}from"./cartStore-JyZy7-1Z.js";import{u as ae}from"./toastMessage-kKI3NqS4.js";import{_ as ie}from"./ToastMessages-9cuA_cXF.js";import{P as le,M as re,K as ce,S as de,a as ue}from"./pagination-lS0_9tep.js";import{_ as me}from"./loading-a3rePalS.js";function pe(s){return G()?(K(s),!0):!1}function W(s){return typeof s=="function"?s():X(s)}const fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _e=Object.prototype.toString,ve=s=>_e.call(s)==="[object Object]",ge=()=>{};function F(s){var n;const f=W(s);return(n=f==null?void 0:f.$el)!=null?n:f}const H=fe?window:void 0;function I(...s){let n,f,e,u;if(typeof s[0]=="string"||Array.isArray(s[0])?([f,e,u]=s,n=H):[n,f,e,u]=s,!n)return ge;Array.isArray(f)||(f=[f]),Array.isArray(e)||(e=[e]);const r=[],p=()=>{r.forEach(c=>c()),r.length=0},g=(c,a,o,v)=>(c.addEventListener(a,o,v),()=>c.removeEventListener(a,o,v)),m=q(()=>[F(n),W(u)],([c,a])=>{if(p(),!c)return;const o=ve(a)?{...a}:a;r.push(...f.flatMap(v=>e.map(b=>g(c,v,b,o))))},{immediate:!0,flush:"post"}),_=()=>{m(),p()};return pe(_),_}const he={page:s=>[s.pageX,s.pageY],client:s=>[s.clientX,s.clientY],screen:s=>[s.screenX,s.screenY],movement:s=>s instanceof Touch?null:[s.movementX,s.movementY]};function be(s={}){const{type:n="page",touch:f=!0,resetOnTouchEnds:e=!1,initialValue:u={x:0,y:0},window:r=H,target:p=r,scroll:g=!0,eventFilter:m}=s;let _=null;const c=l(u.x),a=l(u.y),o=l(null),v=typeof n=="function"?n:he[n],b=i=>{const d=v(i);_=i,d&&([c.value,a.value]=d,o.value="mouse")},w=i=>{if(i.touches.length>0){const d=v(i.touches[0]);d&&([c.value,a.value]=d,o.value="touch")}},k=()=>{if(!_||!r)return;const i=v(_);_ instanceof MouseEvent&&i&&(c.value=i[0]+r.scrollX,a.value=i[1]+r.scrollY)},M=()=>{c.value=u.x,a.value=u.y},V=m?i=>m(()=>b(i),{}):i=>b(i),j=m?i=>m(()=>w(i),{}):i=>w(i),C=m?()=>m(()=>k(),{}):()=>k();if(p){const i={passive:!0};I(p,["mousemove","dragover"],V,i),f&&n!=="movement"&&(I(p,["touchstart","touchmove"],j,i),e&&I(p,"touchend",M,i)),g&&n==="page"&&I(r,"scroll",C,{passive:!0})}return{x:c,y:a,sourceType:o}}function ye(s,n={}){const{handleOutside:f=!0,window:e=H}=n,u=n.type||"page",{x:r,y:p,sourceType:g}=be(n),m=l(s??(e==null?void 0:e.document.body)),_=l(0),c=l(0),a=l(0),o=l(0),v=l(0),b=l(0),w=l(!0);let k=()=>{};return e&&(k=q([m,r,p],()=>{const M=F(m);if(!M)return;const{left:V,top:j,width:C,height:i}=M.getBoundingClientRect();a.value=V+(u==="page"?e.pageXOffset:0),o.value=j+(u==="page"?e.pageYOffset:0),v.value=i,b.value=C;const d=r.value-a.value,T=p.value-o.value;w.value=C===0||i===0||d<0||T<0||d>C||T>i,(f||!w.value)&&(_.value=d,c.value=T)},{immediate:!0}),I(document,"mouseleave",()=>{w.value=!0})),{x:r,y:p,sourceType:g,elementX:_,elementY:c,elementPositionX:a,elementPositionY:o,elementHeight:v,elementWidth:b,isOutside:w,stop:k}}const we={class:"goods-image flex-column d-flex align-items-between p-0"},xe=["src"],ke={class:"small d-flex px-0 m-0"},Ce=["onMouseenter"],Te=["src"],Pe={__name:"ImageComponentView",props:{imageList:{type:Array,default:()=>[]}},setup(s){const n=l(0),f=a=>{n.value=a},e=l(null),{elementX:u,elementY:r,isOutside:p}=ye(e),g=l(0),m=l(0),_=l(0),c=l(0);return q([u,r,p],()=>{p.value||(u.value>125&&u.value<325&&(g.value=u.value-125),r.value>125&&r.value<325&&(m.value=r.value-125),u.value<125&&(g.value=0),u.value>325&&(g.value=225),r.value<125&&(m.value=0),r.value>325&&(m.value=225),_.value=-g.value*2,c.value=-m.value*2)}),(a,o)=>(h(),y("div",we,[t("div",{class:"middle",ref_key:"target",ref:e},[t("img",{src:s.imageList[n.value],class:"img-fluid object-fit-cover w-100",alt:""},null,8,xe),Y(t("div",{class:"layer",style:U({left:`${g.value}px`,top:`${m.value}px`})},null,4),[[N,!X(p)]])],512),t("ul",ke,[(h(!0),y($,null,R(s.imageList,(v,b)=>(h(),y("li",{class:Q(["list-unstyled p-0 me-2",{active:b===n.value}]),key:b,onMouseenter:w=>f(b)},[t("img",{src:v,class:"img-fluid object-fit-cover w-100 h-100",alt:""},null,8,Te)],42,Ce))),128))]),Y(t("div",{class:"large",style:U([{backgroundImage:`url(${s.imageList[n.value]})`,backgroundPositionX:`${_.value}px`,backgroundPositionY:`${c.value}px`}])},null,4),[[N,!X(p)]])]))}},Me=D(Pe,[["__scopeId","data-v-70dfa292"]]);var Se={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/cat-paws/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Le={setup(){const{VITE_APP_URL:s,VITE_APP_PATH:n}=Se,f=J(),e=Z(),u=ne(),{getCart:r}=u,p=ae(),{pushMessage:g}=p,m=l(e.params.productId),_=l([]),c=l({loadingItem:""}),a=l(!1),o=l({}),v=l([]),b=l(1),w=l(e.params),k=()=>{a.value=!0,A.get(`${s}/api/${n}/product/${w.value.id}`).then(d=>{o.value=d.data.product,v.value=d.data.product.imagesUrl,a.value=!1})},M=()=>{a.value=!0,A.get(`${s}/api/${n}/products`).then(d=>{_.value=d.data.products,a.value=!1}).catch(d=>{alert(d.response.data.message),a.value=!1})},V=d=>{w.value=d,f.push(`/product/${d.id}`).then(()=>{}),k()},j=l(["時尚配件","休閒娛樂","生活用品"]),C=()=>{const{category:d=""}=e.query,T=`${s}/api/${n}/products?category=${d}`;a.value=!0,A.get(T).then(O=>{o.value=O.data.products,a.value=!1})},i=d=>{c.value.loadingItem=d;const T={product_id:d,qty:b.value},O=`${s}/api/${n}/cart`;A.post(O,{data:T}).then(z=>{c.value.loadingItem="",g({style:"success",title:"加入購物車",content:z.data.message}),r()})};return q(()=>e.query,()=>{r()}),ee(()=>{k(),r(),M()}),{modules:[le,re,ce],products:_,openModal:V,addToCart:i,product:o,imagesUrl:v,qty:b,categories:j,getProducts:C,gProduct:w,id:m,status:c,isLoading:a}},components:{Swiper:de,SwiperSlide:ue,ImageComponent:Me,ToastMessages:ie}},Ee={id:"app"},Ve=t("img",{src:me,width:"500",alt:"loading",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1),je={class:"container mt-7"},Ie={"aria-label":"breadcrumb"},Ae={class:"breadcrumb"},$e={class:"breadcrumb-item",to:"/"},qe={class:"breadcrumb-item"},Oe={class:"breadcrumb-item active","aria-current":"page"},Be={class:"container bg-vanilla pt-2 pb-5"},Xe={class:"row mt-5"},Ye={class:"col-md-6 d-flex justify-content-center p-0"},Re={class:"col-md-6 d-flex flex-column justify-content-between p-0"},He={class:"fs-4 mb-4 px-2"},Ne={class:"mb-4 px-2"},Ue={key:0,class:"text-gray2 fs-5"},De={key:1,class:"d-flex align-items-center justify-content-start"},We={class:"text-gray2 fs-5 me-2"},Fe={class:"text-brown fs-4"},ze={class:"mb-5 px-2"},Ge=t("div",{class:"fs-6 mb-2"},"商品內容:",-1),Ke={style:{"white-space":"pre-wrap"}},Qe={class:"input-group mb-4 px-2 rwdQty"},Je=["disabled"],Ze=["disabled"],et={class:"d-flex justify-content-between mb-3 rwdQty"},tt={class:"d-flex justify-content-center text-brown"},st={class:"d-flex align-items-center justify-content-center btnHover",style:{width:"150px",height:"40px",background:"#ffffff",border:"1px solid #e8b887"}},ot={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},nt={class:"d-flex justify-content-center text-brown"},at={class:"d-flex align-items-center justify-content-center",style:{width:"150px",height:"40px",background:"#ffffff",border:"1px solid #a2672d"}},it={class:"mt-7 col-12 col-md-8 margin-auto"},lt=t("div",{class:"fs-6 mb-4"},"商品詳情:",-1),rt={style:{"white-space":"pre-wrap"}},ct={class:"list-unstyled mb-3"},dt=["src"],ut={class:"container mt-8"},mt=t("h3",{class:"text-center text-brown"},[E(" 猜你喜歡 "),t("div",{class:"text-center text-brown m-0 p-0 fs-1"},"-")],-1),pt={id:"swiper"},ft=["onClick"],_t={key:0,class:"position-absolute top-0 start-0 fw-bold text-white p-2 bg-brown fs-6 fw-bold"},vt=["src"],gt={class:"card-body d-flex flex-column justify-content-between p-3"},ht={class:"card-title"},bt={key:0,class:"text-gray2 fs-5 mt-2"},yt={key:1,class:"d-flex align-items-center justify-content-center ms-2 mt-2"},wt={class:"text-gray2 fs-5"},xt={class:"text-brown fs-5 ms-3"},kt={class:"mt-2"},Ct=["onClick"],Tt={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},Pt=t("i",{class:"bi bi-cart-plus fs-5"},null,-1);function Mt(s,n,f,e,u,r){const p=S("VueLoading"),g=S("RouterLink"),m=S("ImageComponent"),_=S("swiper-slide"),c=S("swiper"),a=S("ToastMessages");return h(),y($,null,[t("div",Ee,[P(p,{active:e.isLoading,"is-full-page":!0,"background-color":"#FFF8F1",opacity:1,"z-index":1060},{default:L(()=>[Ve]),_:1},8,["active"]),t("div",je,[t("nav",Ie,[t("ol",Ae,[t("li",$e,[P(g,{class:"text-black text-decoration-none",to:"/"},{default:L(()=>[E("首頁")]),_:1})]),t("li",qe,[P(g,{class:"text-black text-decoration-none",to:"/products"},{default:L(()=>[E("產品")]),_:1})]),t("li",Oe,x(e.product.category),1)])]),t("div",Be,[t("div",Xe,[t("div",Ye,[P(m,{imageList:e.imagesUrl,class:"mb-8"},null,8,["imageList"])]),t("div",Re,[t("div",He,x(e.product.title),1),t("div",Ne,[e.product.price===e.product.origin_price?(h(),y("div",Ue," $"+x(s.$filters.numberToCurrencyNo(e.product.origin_price)),1)):(h(),y("div",De,[t("del",We,"$"+x(s.$filters.numberToCurrencyNo(e.product.origin_price)),1),t("div",Fe," $"+x(s.$filters.numberToCurrencyNo(e.product.price)),1)]))]),t("div",ze,[Ge,t("div",Ke,x(e.product.content),1)]),t("div",Qe,[t("button",{type:"button",class:"btn btn-brown",onClick:n[0]||(n[0]=o=>e.qty>1?e.qty--:null),disabled:e.qty<=1}," - ",8,Je),Y(t("input",{"onUpdate:modelValue":n[1]||(n[1]=o=>e.qty=o),type:"number",min:"1",max:"20",class:"form-control text-center","aria-label":"Dollar amount (with dot and two decimal places)",readonly:""},null,512),[[te,e.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-brown",onClick:n[2]||(n[2]=o=>e.qty<20?e.qty++:null),disabled:e.qty>=20}," + ",8,Ze)]),t("div",et,[t("div",tt,[t("div",st,[t("div",{class:"text-center bg-lightBrown text-white m-1",style:{width:"140px",height:"30px","line-height":"30px"},onClick:n[3]||(n[3]=o=>e.addToCart(e.product.id))},[e.product.id===e.status.loadingItem?(h(),y("span",ot)):B("",!0),E(" 加入購物車 ")])])]),t("div",nt,[t("div",at,[P(g,{to:"/cart",class:"text-center bg-brown text-decoration-none text-white m-1",style:{width:"140px",height:"30px","line-height":"30px"},onClick:n[4]||(n[4]=o=>e.addToCart(e.product.id))},{default:L(()=>[E("立即購買 ")]),_:1})])])])])]),t("div",it,[lt,t("div",rt,x(e.product.description),1),(h(!0),y($,null,R(e.imagesUrl,o=>(h(),y("div",{class:"mt-5",key:o},[t("li",ct,[t("img",{src:o,class:"w-100",alt:""},null,8,dt)])]))),128))])])])]),t("div",ut,[mt,t("div",pt,[P(c,{slidesPerView:1,spaceBetween:10,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:30}},grabCursor:!0,freeMode:!0,modules:e.modules,class:"mySwiper",mousewheel:!0,keyboard:!0},{default:L(()=>[(h(!0),y($,null,R(e.products,o=>(h(),se(_,{key:o.id},{default:L(()=>[t("div",{class:"card shadow-sm border-0 position-relative mb-5",onClick:v=>e.openModal(o)},[o.price!==o.origin_price?(h(),y("span",_t,"SALE")):B("",!0),t("img",{src:o.imageUrl,class:"img-fluid object-fit-cover w-100",style:{height:"300px"},alt:"productPicture"},null,8,vt),t("div",gt,[t("div",ht,x(o.title),1),o.price===o.origin_price?(h(),y("div",bt," $"+x(s.$filters.numberToCurrencyNo(o.origin_price)),1)):(h(),y("div",yt,[t("del",wt,"$"+x(s.$filters.numberToCurrencyNo(o.origin_price)),1),t("div",xt," $"+x(s.$filters.numberToCurrencyNo(o.price)),1)])),t("div",kt,[t("button",{type:"button",class:"btn btn-outline-brown m-2 px-5 rounded-pill",onClick:oe(v=>e.addToCart(o.id,1),["stop"])},[o.id===e.status.loadingItem?(h(),y("span",Tt)):B("",!0),E(" 加入購物車 "),Pt],8,Ct)])])],8,ft)]),_:2},1024))),128))]),_:1},8,["modules"])])]),P(a)],64)}const $t=D(Le,[["render",Mt]]);export{$t as default};
