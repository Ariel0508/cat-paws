import{a as S}from"./axios-G2rPRu76.js";import{_ as $,k as q,l as D,g as r,h as j,r as v,o as l,c as d,a as t,b as f,w as T,F as L,m as B,d as U,j as I,t as m,q as H,p as O,f as z}from"./index-rRgU2xyF.js";import{u as G}from"./cartStore-JyZy7-1Z.js";import{u as J}from"./toastMessage-kKI3NqS4.js";import{_ as K}from"./ToastMessages-9cuA_cXF.js";import{_ as Q}from"./loading-a3rePalS.js";var W={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/cat-paws/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:V,VITE_APP_PATH:M}=W,X={setup(){const i=G(),{getCart:n}=i,y=J(),{pushMessage:s}=y,P=q(),w=D(),h=r(w.params.productId),_=r([]),u=r({loadingItem:""}),e=r(!1),g=r([]),E=r(0),R=r(0),x=()=>{_.value.sort((o,c)=>o.price-c.price),document.querySelector(".lowPrice").classList.add("price-active"),document.querySelector(".heightPrice").classList.remove("price-active")},C=()=>{_.value.sort((o,c)=>c.price-o.price),document.querySelector(".heightPrice").classList.add("price-active"),document.querySelector(".lowPrice").classList.remove("price-active")},A=o=>{P.push(`/product/${o.id}`).then(()=>{})},k=()=>{const o=`${V}/api/${M}/products/all`;e.value=!0,S.get(o).then(c=>{const b=c.data.products.filter(p=>p.price<p.origin_price);_.value=b,e.value=!1}).catch(c=>{alert(c.response.data.message)})},F=o=>{u.value.loadingItem=o;const c={product_id:o,qty:1},b=`${V}/api/${M}/cart`;S.post(b,{data:c}).then(p=>{u.value.loadingItem="",s({style:"success",title:"加入購物車",content:p.data.message}),n()})},N=()=>{const o=event.target.value;o==="high"?C():o==="low"&&x()};return j(()=>{k()}),{id:h,products:_,status:u,isLoading:e,addToCart:F,openModal:A,heightPrice:C,lowPrice:x,carts:g,finalTotal:E,total:R,getProducts:k,selectChange:N}},components:{ToastMessages:K}},a=i=>(O("data-v-9b97a354"),i=i(),z(),i),Y={id:"app"},Z=a(()=>t("img",{src:Q,width:"500",alt:"loading",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1)),tt={class:"container mt-7 p-0"},et={"aria-label":"breadcrumb"},st={class:"breadcrumb"},ot={class:"breadcrumb-item",to:"/"},at=a(()=>t("li",{class:"breadcrumb-item active","aria-current":"page"},"特價商品",-1)),it={class:"row mt-7"},ct={class:"col-md-3"},nt={class:"mSale"},rt={class:"d-flex justify-content-end mb-5"},lt=a(()=>t("option",{selected:""},"價格",-1)),dt=a(()=>t("option",{value:"high"},"價格高到低",-1)),_t=a(()=>t("option",{value:"low"},"價格低到高",-1)),ut=[lt,dt,_t],pt={class:"pSale"},mt=a(()=>t("div",{class:"fs-4 text-gray2 mb-2"},"篩選條件",-1)),ht=a(()=>t("span",{class:"heightPrice"},"價格高到低",-1)),gt=[ht],bt=a(()=>t("br",null,null,-1)),vt=a(()=>t("span",{class:"lowPrice"},"價格低到高",-1)),ft=[vt],yt={class:"col-md-9"},Pt={class:"row"},wt=["onClick"],xt={key:0,class:"position-absolute top-0 start-0 fw-bold text-white p-2 bg-brown"},Ct=["src"],kt={class:"card-body"},St={class:"card-title text-center rwdFont text-truncate"},Tt={key:0,class:"text-gray2 fs-5 card-title"},Lt={key:1,class:"d-flex justify-content-center align-items-center card-title ms-2"},It={class:"text-gray2 fs-5"},Vt={class:"text-brown fs-5 ms-3"},Mt=a(()=>t("br",null,null,-1)),Et=["onClick"],Rt={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},At=a(()=>t("i",{class:"bi bi-cart-plus"},null,-1));function Ft(i,n,y,s,P,w){const h=v("VueLoading"),_=v("RouterLink"),u=v("ToastMessages");return l(),d(L,null,[t("div",Y,[f(h,{active:s.isLoading,"is-full-page":!0,"background-color":"#FFF8F1",opacity:1,"z-index":1060},{default:T(()=>[Z]),_:1},8,["active"]),t("div",tt,[t("nav",et,[t("ol",st,[t("li",ot,[f(_,{class:"text-black text-decoration-none",to:"/"},{default:T(()=>[U("首頁")]),_:1})]),at])]),t("div",it,[t("div",ct,[t("div",nt,[t("div",rt,[t("select",{class:"p-1 text-gray2","aria-label":"Default select example",onChange:n[0]||(n[0]=(...e)=>s.selectChange&&s.selectChange(...e))},ut,32)])]),t("div",pt,[mt,t("div",{class:"fs-6 text-gray2 mb-2 btn p-0 border-0",onClick:n[1]||(n[1]=(...e)=>s.heightPrice&&s.heightPrice(...e))},gt),bt,t("div",{class:"fs-6 text-gray2 mb-2 btn p-0 border-0",onClick:n[2]||(n[2]=(...e)=>s.lowPrice&&s.lowPrice(...e))},ft)])]),t("div",yt,[t("div",Pt,[(l(!0),d(L,null,B(s.products,e=>(l(),d("div",{class:"col-md-4 col-6",key:e.id},[t("div",{class:"card shadow-sm border-0 position-relative mb-5",onClick:g=>s.openModal(e)},[e.price!==e.origin_price?(l(),d("span",xt,"SALE")):I("",!0),t("img",{src:e.imageUrl,class:"img-fluid object-fit-cover w-100 rwdImg",alt:"productPicture"},null,8,Ct),t("div",kt,[t("p",St,m(e.title),1),e.price===e.origin_price?(l(),d("div",Tt," $"+m(i.$filters.numberToCurrencyNo(e.origin_price)),1)):(l(),d("div",Lt,[t("del",It,"$"+m(i.$filters.numberToCurrencyNo(e.origin_price)),1),t("div",Vt," $"+m(i.$filters.numberToCurrencyNo(e.price)),1)])),Mt,t("button",{type:"button",class:"btn btn-outline-brown border-0 fs-5 m-2 position-absolute bottom-0 end-0",onClick:H(g=>s.addToCart(e.id,1),["stop"])},[e.id===s.status.loadingItem?(l(),d("span",Rt)):I("",!0),At],8,Et)])],8,wt)]))),128))])])])])]),f(u)],64)}const Ut=$(X,[["render",Ft],["__scopeId","data-v-9b97a354"]]);export{Ut as default};
