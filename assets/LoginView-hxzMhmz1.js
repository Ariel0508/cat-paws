import{_ as f,g as w,k as b,r as i,o as g,c as h,a as s,b as l,w as v,q as x,y as c,C as d,F as y}from"./index-rRgU2xyF.js";import{a as P}from"./axios-G2rPRu76.js";import{u as T}from"./toastMessage-kKI3NqS4.js";import{_ as M}from"./ToastMessages-9cuA_cXF.js";var V={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/cat-paws/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:k}=V,E=T(),{pushMessage:m}=E,R={setup(){const a=w({username:"",password:""}),e=b();return{user:a,login:()=>{P.post(`${k}/admin/signin`,a.value).then(o=>{const{token:n,expired:r}=o.data;document.cookie=`rubbyToken=${n}; expires=${new Date(r)};`,m({style:"success",title:"登入成功"}),e.push("/admin/products")}).catch(()=>{m({style:"danger",title:"登入失敗"})})}}},components:{ToastMessages:M}},A={class:"container mt-5"},L=s("h1",{class:"fs-2"},"Cat Paws",-1),S={class:"container d-flex justify-content-center align-items-center text-center vh-100 w-100"},D={class:"row"},U=s("div",{class:"fs-3 mb-3 fw-normal text-brown"},"請先登入",-1),B={class:"form-floating"},C=s("label",{for:"username"},"Email address",-1),q={class:"form-floating mt-4"},I=s("label",{for:"password"},"Password",-1),F=s("button",{class:"w-100 btn btn-lg btn-brown mt-4",type:"submit"}," 登入 ",-1),N=s("p",{class:"mt-5 mb-3 text-muted copy"},"© 2024 by Ariel",-1);function O(a,e,u,o,n,r){const _=i("RouterLink"),p=i("ToastMessages");return g(),h(y,null,[s("div",A,[l(_,{class:"navbar-brand logo text-brown",to:"/"},{default:v(()=>[L]),_:1})]),s("div",S,[s("div",D,[s("form",{class:"form-signin bg-vanilla shadow p-5 rounded w-100",onSubmit:e[2]||(e[2]=x((...t)=>o.login&&o.login(...t),["prevent"]))},[U,s("div",B,[c(s("input",{type:"email",class:"form-control mt-4","onUpdate:modelValue":e[0]||(e[0]=t=>o.user.username=t),id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[d,o.user.username]]),C]),s("div",q,[c(s("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>o.user.password=t),id:"password",placeholder:"Password",required:""},null,512),[[d,o.user.password]]),I]),F,N],32)])]),l(p)],64)}const G=f(R,[["render",O]]);export{G as default};
